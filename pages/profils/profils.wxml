<view class="page h-full flex flex-col p-4 items-center gap-4">

  <view class="header">
    <view class="back-button" bindtap="onBack">
      <image src="/images/icones/retour.svg" class="back-icon"></image>
      <text>Retour</text>
    </view>
  </view>

  <view class="flex flex-col gap-4 text-base items-center">

    <!-- MODAL -->
    <view wx:if="{{showAvatarModal}}" class="modal-mask">
      <view class="modal-card">
        <view class="avatar-grid">
          <view
            wx:for="{{avatars}}"
            wx:key="id"
            class="avatar-card flex flex-col items-center justify-content gap-2 {{disabledAvatars[0] === item.icon ? 'disabled' : ''}} {{selectedAvatarId === item.id ? 'active' : ''}}"
            bindtap="selectAvatar"
            data-avatar="{{item}}"
          >
            <image class="avatar-icon" src="{{item.icon}}" />
            <text class="avatar-name">{{item.name}}</text>
            <text class="avatar-label">{{item.label}}</text>
          </view>
        </view>

        <button class="btn-confirm" bindtap="confirmAvatar">
          Fermer
        </button>

      </view>
    </view>

    <!-- TITLE -->
    <view class="flex items-center justify-center flex-col gap-1">
      <view class="flex gap-2 items-center">
        <image src="/images/icones/profil-setting.jpeg" class="icon" />
        <text class="text-xl text-brown">Profils Joueurs</text>
      </view>
      <text class="text-light-orange">Personnalisez vos profils</text>
    </view>

    <!-- PLAYERS -->
    <view class="flex flex-col gap-4 items-center">
      <view
        wx:for="{{players}}"
        wx:key="index"
        class="p-6 {{index === 0 ? 'border-green' : 'border-red'}} rounded-md flex flex-col items-center gap-4"
      >
        <view class="{{index === 0 ? 'bg-green' : 'bg-red'}} text-white text-xl px-4 py-2 rounded-lg">
          {{item.name}}
        </view>

        <image
          bindtap="openAvatarModal"
          data-index="{{index}}"
          class="avatar {{index === 0 ? 'bg-green' : 'bg-red'}}"
          src="{{item.avatar}}"
        />

        <input
          placeholder="Nom du joueur"
          value="{{item.name}}"
          data-index="{{index}}"
          bindinput="onPlayerInput"
        />
      </view>
    </view>

  </view>
</view>
